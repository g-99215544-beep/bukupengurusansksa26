<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Buku Pengurusan Digital SK Sri Aman 2026">
    <meta name="theme-color" content="#6366f1">
    <title>Buku Pengurusan SK Sri Aman 2026</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #e2e8f0;
        }
        
        .gradient-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }
        
        .pdf-container {
            background: #f8fafc;
        }
        
        canvas {
            display: block;
            margin: 0 auto 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .sidebar.open {
            transform: translateX(0);
        }
        
        .toast {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .search-dropdown {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .highlight {
            background: yellow;
            border: 2px solid orange;
            padding: 2px 4px;
            border-radius: 2px;
        }
        
        .calendar-day {
            min-height: 80px;
            position: relative;
        }
        
        .event-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
            margin: 0 1px;
        }
        
        /* Loading skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s ease-in-out infinite;
        }
        
        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        
        // ========== KONFIGURASI SEKOLAH ==========
        const CONFIG = {
            namaSekolah: "SK Sri Aman",
            tahun: "2026",
            pdfFileName: "buku-pengurusan.pdf",
            jumlahMukaSurat: 98,
            logoEmoji: "üè´"
        };
        
        // ========== TABLE OF CONTENTS ==========
        const tableOfContents = [
            { icon: "üìã", label: "Biodata Diri", page_start: 2, page_end: 2 },
            { icon: "üëã", label: "Kata Aluan Guru Besar", page_start: 3, page_end: 3 },
            { icon: "üåê", label: "Laman Sesawang", page_start: 4, page_end: 4 },
            { icon: "üìú", label: "Sejarah Sekolah", page_start: 5, page_end: 5 },
            { icon: "üè¢", label: "Profil Sekolah", page_start: 6, page_end: 6 },
            { icon: "üö®", label: "Pelan Kecemasan", page_start: 7, page_end: 7 },
            { icon: "üë•", label: "Senarai Guru dan Staf 2026", page_start: 8, page_end: 8 },
            { icon: "üéØ", label: "Visi Dan Misi", page_start: 9, page_end: 9 },
            { icon: "üéµ", label: "Piagam Dan Lagu Sekolah", page_start: 10, page_end: 10 },
            { icon: "üìÖ", label: "Jadual Guru Bertugas Mingguan", page_start: 11, page_end: 18 },
            { icon: "üìÜ", label: "Takwim", page_start: 19, page_end: 24 },
            { icon: "‚ö°", label: "Pengurusan Pentadbiran 2026", page_start: 25, page_end: 33 },
            { icon: "üìö", label: "Pengurusan Kurikulum 2026", page_start: 34, page_end: 48 },
            { icon: "üíô", label: "Pengurusan Hal Ehwal Murid 2026", page_start: 49, page_end: 56 },
            { icon: "üéØ", label: "Pengurusan Kokurikulum 2026", page_start: 57, page_end: 98 }
        ];
        
        // ========== DATABASE GURU ==========
        const guruDatabase = [
            {
                nama: "MAHATHIR BIN MD SAHAK",
                jawatan: "Guru Besar",
                avatar: "üë®‚Äçüíº",
                tugas: [
                    { label: "Pengurusan Pentadbiran", page_number: 25, category: "pentadbiran" }
                ]
            },
            {
                nama: "MUHAIZAM BIN MD MOKHTAR",
                jawatan: "PK Pentadbiran",
                avatar: "üë®‚Äçüíº",
                tugas: [
                    { label: "Pengurusan Pentadbiran", page_number: 25, category: "pentadbiran" }
                ]
            },
            {
                nama: "SHARIMAH BINTI MD ZIN",
                jawatan: "PK HEM",
                avatar: "üë©‚Äçüíº",
                tugas: [
                    { label: "Pengurusan Hal Ehwal Murid", page_number: 49, category: "hem" }
                ]
            },
            {
                nama: "SANGARA NANDA A/P KARUPPIAH",
                jawatan: "PK Kokurikulum",
                avatar: "üë©‚Äçüíº",
                tugas: [
                    { label: "Pengurusan Kokurikulum", page_number: 57, category: "kokurikulum" }
                ]
            },
            {
                nama: "AFFIQ NAQIUDDIN B. ALIAS",
                jawatan: "Guru Bahasa Melayu",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Melayu", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "AFIEYFAH BT. MOHD. ALIM",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "AINA AMIRAH BT HALIM",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "AMIRUL ARIFF BIN YUSOF",
                jawatan: "Guru Sains",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Sains", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "ASQALANI BIN SUHAIMI",
                jawatan: "Guru Pemulihan",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Program Pemulihan", page_number: 49, category: "hem" }
                ]
            },
            {
                nama: "CHIN YAN NING",
                jawatan: "Guru Sains",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Sains", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "HAMDINA NURARIFAH BINTI AHMAD @ ZAMRI",
                jawatan: "Guru Prasekolah",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Pengurusan Prasekolah", page_number: 49, category: "hem" }
                ]
            },
            {
                nama: "MAGALETCHUMI A/P VEERAPPEN",
                jawatan: "Guru Bahasa Tamil",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Tamil", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "MOHAMAD SOLEHULHAFIZ B. SUHAIMI",
                jawatan: "Guru Sejarah",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Sejarah", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "MUHAMMAD AMMAR BIN MUSTAFFA",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "MUHAMMAD IHSAN B. SHAIK ALI",
                jawatan: "Guru Pendidikan Seni",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Seni", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "MUHAMMAD SUFIAN B MUSTAFA BAKRI",
                jawatan: "Guru Matematik",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Matematik", page_number: 34, category: "kurikulum" },
                    { label: "Setiausaha Panitia Matematik", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "MUHAMMAD YASIN BIN ABDUL AZIZ",
                jawatan: "Guru Muzik",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Muzik", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NG SHI HUI",
                jawatan: "Guru Bahasa Cina",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Cina", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NOOR HIDAYAH BINTI SALLEH",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NORLIZAM B. IDROSE",
                jawatan: "Guru Bahasa Melayu",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Melayu", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NURFATIN AFIQAH BINTI HAMZAH",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR ELYIA BT. MOHD. ZIN",
                jawatan: "Guru Bahasa Melayu",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Melayu", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR HAZIERAH BT. AZMI",
                jawatan: "Guru Matematik",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Matematik", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR HIDAYAH BT. ABDUL JALIL",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR IZZANY BINTI MOHD",
                jawatan: "Guru Bahasa Melayu",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Melayu", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR IZZATI BINTI MOHD KHALIL",
                jawatan: "Guru Kaunseling",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Unit Bimbingan & Kaunseling", page_number: 49, category: "hem" }
                ]
            },
            {
                nama: "NUR IZZATI BINTI SAMSUDIN",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR SYAFIQAH BINTI NIZAMDIN",
                jawatan: "Guru Bahasa Inggeris",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Inggeris", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR ZUHAIRA BINTI MOHAMED SALIB",
                jawatan: "Guru Bahasa Inggeris",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Inggeris", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "NUR ZURAINIE BINTI MOHD FAUZI",
                jawatan: "Guru Bahasa Melayu",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Melayu", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "PAMELA KHOO BEE LAY",
                jawatan: "Guru Bahasa Inggeris",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Inggeris", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "PUNITHA A/P MUNUSAMY",
                jawatan: "Guru Sains",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Sains", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "RADHIAH BINTI ZAINON",
                jawatan: "Guru Pendidikan Islam",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Pendidikan Islam", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "RENUKHA A/P NALLASAMY",
                jawatan: "Guru Bahasa Inggeris",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Inggeris", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "SARIDAH BT TK MD. YUSOFF",
                jawatan: "Guru Sejarah",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Sejarah", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "SHARWINTHIRAN A/L THAVARAJAH",
                jawatan: "Guru Prasekolah",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Pengurusan Prasekolah", page_number: 49, category: "hem" }
                ]
            },
            {
                nama: "THANALETCHIMI A/P R.RAMA",
                jawatan: "Guru Bahasa Inggeris",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Inggeris", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "VINEETA A/P SINGARAVELOO",
                jawatan: "Guru Matematik",
                avatar: "üë©‚Äçüè´",
                tugas: [
                    { label: "Panitia Matematik", page_number: 34, category: "kurikulum" }
                ]
            },
            {
                nama: "WAN AHMAD BIN WAN IBRAHIM",
                jawatan: "Guru Bahasa Inggeris",
                avatar: "üë®‚Äçüè´",
                tugas: [
                    { label: "Panitia Bahasa Inggeris", page_number: 34, category: "kurikulum" }
                ]
            }
        ];
        
        // ========== TAKWIM SEKOLAH ==========
        const takwimData = {
            "2026-01-01": [{ event: "Cuti Akhir Sesi 2025/2026", type: "cuti", color: "#ef4444" }],
            "2026-01-08": [{ event: "Hari Orientasi Prasekolah & Tahun 1", type: "sekolah", color: "#10b981" }],
            "2026-01-10": [{ event: "Cuti Akhir Sesi 2025/2026", type: "cuti", color: "#ef4444" }],
            "2026-01-12": [{ event: "Program Minggu Pertama", type: "sekolah", color: "#10b981" }],
            "2026-02-02": [{ event: "Cuti Thaipusam", type: "cuti", color: "#ef4444" }],
            "2026-02-03": [{ event: "Mesyuarat PBPPP Bil.1", type: "aktiviti", color: "#8b5cf6" }],
            "2026-02-13": [{ event: "Gotong-Royong 1", type: "sekolah", color: "#10b981" }],
            "2026-03-02": [{ event: "Pelancaran Minggu Panitia BA & BC", type: "sekolah", color: "#10b981" }],
            "2026-03-03": [{ event: "Mesyuarat Aset (JPAK)", type: "aktiviti", color: "#8b5cf6" }],
            "2026-04-07": [{ event: "Nuzul Al-Quran", type: "cuti", color: "#ef4444" }],
            "2026-04-09": [{ event: "Program Panitia PI & PM", type: "sekolah", color: "#10b981" }],
            "2026-04-12": [{ event: "Mesyuarat Pengurusan & Mesyuarat Guru Bil.2", type: "aktiviti", color: "#8b5cf6" }],
            "2026-05-01": [{ event: "Cuti Hari Pekerja", type: "cuti", color: "#ef4444" }],
            "2026-05-03": [{ event: "Sambutan Hari Raya Aidilfitri", type: "sekolah", color: "#10b981" }],
            "2026-06-01": [{ event: "Cuti Pertengahan Tahun", type: "cuti", color: "#ef4444" }],
            "2026-07-08": [{ event: "Pencerapan PDP 2", type: "sekolah", color: "#10b981" }],
            "2026-08-02": [{ event: "Mesyuarat Pengurusan & Mesyuarat Guru Bil.3", type: "aktiviti", color: "#8b5cf6" }],
            "2026-08-31": [{ event: "Hari Kemerdekaan", type: "cuti", color: "#ef4444" }],
            "2026-09-16": [{ event: "Hari Malaysia", type: "cuti", color: "#ef4444" }],
            "2026-10-14": [{ event: "Hari Deepavali", type: "cuti", color: "#ef4444" }],
            "2026-11-16": [{ event: "Cuti Akhir Tahun", type: "cuti", color: "#ef4444" }],
            "2026-12-25": [{ event: "Hari Krismas", type: "cuti", color: "#ef4444" }]
        };
        
        // ========== KATEGORI TUGAS ==========
        const taskCategories = {
            pentadbiran: { color: "#f59e0b", label: "Pentadbiran", icon: "‚ö°" },
            kurikulum: { color: "#10b981", label: "Kurikulum", icon: "üìö" },
            hem: { color: "#3b82f6", label: "HEM", icon: "üíô" },
            kokurikulum: { color: "#8b5cf6", label: "Kokurikulum", icon: "üéØ" },
            ppkip: { color: "#ec4899", label: "PPKIP", icon: "üíó" }
        };
        
        // ========== EVENT TYPES ==========
        const eventTypes = {
            cuti: { label: "Cuti Umum", icon: "üî¥", color: "#ef4444" },
            sekolah: { label: "Aktiviti Sekolah", icon: "üü¢", color: "#10b981" },
            aktiviti: { label: "Program/Majlis", icon: "üü£", color: "#8b5cf6" },
            peperiksaan: { label: "Peperiksaan", icon: "üîµ", color: "#0ea5e9" }
        };
        
        // ========== MAIN APP COMPONENT ==========
        function App() {
            const [activeTab, setActiveTab] = useState('buku');
            const [searchQuery, setSearchQuery] = useState('');
            const [searchResults, setSearchResults] = useState([]);
            const [showSearchDropdown, setShowSearchDropdown] = useState(false);
            const [toast, setToast] = useState(null);
            const [selectedGuru, setSelectedGuru] = useState(null);
            const [taskFilter, setTaskFilter] = useState('semua');
            const [pdfDoc, setPdfDoc] = useState(null);
            const [currentPage, setCurrentPage] = useState(1);
            const [zoomLevel, setZoomLevel] = useState(100);
            const [showSidebar, setShowSidebar] = useState(false);
            const [highlightText, setHighlightText] = useState(null);
            const [currentMonth, setCurrentMonth] = useState(new Date());
            const [selectedDate, setSelectedDate] = useState(null);
            
            const searchInputRef = useRef(null);
            
            // Load PDF
            useEffect(() => {
                const loadPDF = async () => {
                    try {
                        pdfjsLib.GlobalWorkerOptions.workerSrc = 
                            'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                        
                        const loadingTask = pdfjsLib.getDocument(CONFIG.pdfFileName);
                        const pdf = await loadingTask.promise;
                        setPdfDoc(pdf);
                        showToast('üìÑ Buku pengurusan berjaya dimuatkan!');
                    } catch (error) {
                        console.error('Error loading PDF:', error);
                        showToast('‚ùå Gagal memuatkan PDF. Sila muat semula halaman.', 'error');
                    }
                };
                
                loadPDF();
            }, []);
            
            // Search functionality
            useEffect(() => {
                if (searchQuery.length < 2) {
                    setSearchResults([]);
                    setShowSearchDropdown(false);
                    return;
                }
                
                const query = searchQuery.toLowerCase();
                const results = [];
                
                // Search in guru names and positions
                guruDatabase.forEach(guru => {
                    if (guru.nama.toLowerCase().includes(query) || 
                        guru.jawatan.toLowerCase().includes(query)) {
                        results.push({
                            type: 'guru',
                            icon: guru.avatar,
                            label: guru.nama,
                            sublabel: guru.jawatan,
                            data: guru
                        });
                    }
                    
                    // Search in tasks
                    guru.tugas.forEach(tugas => {
                        if (tugas.label.toLowerCase().includes(query)) {
                            results.push({
                                type: 'tugas',
                                icon: taskCategories[tugas.category].icon,
                                label: tugas.label,
                                sublabel: `${guru.nama} - m/s ${tugas.page_number}`,
                                data: { guru, tugas }
                            });
                        }
                    });
                });
                
                // Search in table of contents
                tableOfContents.forEach(section => {
                    if (section.label.toLowerCase().includes(query)) {
                        results.push({
                            type: 'bahagian',
                            icon: section.icon,
                            label: section.label,
                            sublabel: `m/s ${section.page_start}`,
                            data: section
                        });
                    }
                });
                
                // Search in calendar events
                Object.entries(takwimData).forEach(([date, events]) => {
                    events.forEach(event => {
                        if (event.event.toLowerCase().includes(query)) {
                            results.push({
                                type: 'takwim',
                                icon: eventTypes[event.type].icon,
                                label: event.event,
                                sublabel: new Date(date).toLocaleDateString('ms-MY', { 
                                    day: 'numeric', 
                                    month: 'long', 
                                    year: 'numeric' 
                                }),
                                badge: 'Takwim',
                                data: { date, event }
                            });
                        }
                    });
                });
                
                setSearchResults(results.slice(0, 10));
                setShowSearchDropdown(results.length > 0);
            }, [searchQuery]);
            
            // Handle search result click
            const handleSearchResultClick = (result) => {
                switch (result.type) {
                    case 'guru':
                        setActiveTab('guru');
                        setSelectedGuru(result.data);
                        break;
                    case 'tugas':
                        setActiveTab('buku');
                        setCurrentPage(result.data.tugas.page_number);
                        setHighlightText(result.data.guru.nama);
                        break;
                    case 'bahagian':
                        setActiveTab('buku');
                        setCurrentPage(result.data.page_start);
                        break;
                    case 'takwim':
                        setActiveTab('takwim');
                        const eventDate = new Date(result.data.date);
                        setCurrentMonth(eventDate);
                        setSelectedDate(result.data.date);
                        break;
                }
                
                setSearchQuery('');
                setShowSearchDropdown(false);
                showToast(`‚úÖ Navigasi ke ${result.label}`);
            };
            
            // Show toast notification
            const showToast = (message, type = 'success') => {
                setToast({ message, type });
                setTimeout(() => setToast(null), 2500);
            };
            
            // Navigate to page from sidebar
            const navigateToSection = (section) => {
                setCurrentPage(section.page_start);
                setShowSidebar(false);
                showToast(`üìñ Buka: ${section.label}`);
            };
            
            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="gradient-header text-white p-4 sticky top-0 z-50 shadow-lg">
                        <div className="container mx-auto">
                            <div className="flex items-center gap-3 mb-3">
                                <span className="text-3xl">{CONFIG.logoEmoji}</span>
                                <div>
                                    <h1 className="text-xl font-bold">{CONFIG.namaSekolah}</h1>
                                    <p className="text-sm opacity-90">Buku Pengurusan {CONFIG.tahun}</p>
                                </div>
                            </div>
                            
                            {/* Search Bar */}
                            <div className="relative">
                                <input
                                    ref={searchInputRef}
                                    type="text"
                                    placeholder="üîç Cari nama/event..."
                                    className="w-full px-4 py-2 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-300"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    onFocus={() => searchResults.length > 0 && setShowSearchDropdown(true)}
                                />
                                
                                {/* Search Dropdown */}
                                {showSearchDropdown && (
                                    <div className="absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-xl max-h-96 overflow-y-auto search-dropdown">
                                        {searchResults.map((result, idx) => (
                                            <div
                                                key={idx}
                                                className="p-3 hover:bg-gray-100 cursor-pointer border-b last:border-b-0"
                                                onClick={() => handleSearchResultClick(result)}
                                            >
                                                <div className="flex items-start gap-3">
                                                    <span className="text-2xl">{result.icon}</span>
                                                    <div className="flex-1">
                                                        <div className="font-semibold text-gray-800">{result.label}</div>
                                                        <div className="text-sm text-gray-600">{result.sublabel}</div>
                                                    </div>
                                                    {result.badge && (
                                                        <span className="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded">
                                                            {result.badge}
                                                        </span>
                                                    )}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                            
                            {/* Tab Buttons */}
                            <div className="flex gap-2 mt-3">
                                <button
                                    className={`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${
                                        activeTab === 'buku' 
                                            ? 'bg-white text-indigo-600' 
                                            : 'bg-indigo-500 text-white hover:bg-indigo-400'
                                    }`}
                                    onClick={() => setActiveTab('buku')}
                                >
                                    üìñ Buku
                                </button>
                                <button
                                    className={`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${
                                        activeTab === 'guru' 
                                            ? 'bg-white text-indigo-600' 
                                            : 'bg-indigo-500 text-white hover:bg-indigo-400'
                                    }`}
                                    onClick={() => setActiveTab('guru')}
                                >
                                    üë• Guru
                                </button>
                                <button
                                    className={`flex-1 py-2 px-4 rounded-lg font-semibold transition-all ${
                                        activeTab === 'takwim' 
                                            ? 'bg-white text-indigo-600' 
                                            : 'bg-indigo-500 text-white hover:bg-indigo-400'
                                    }`}
                                    onClick={() => setActiveTab('takwim')}
                                >
                                    üìÖ Takwim
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    {/* Content Area */}
                    <main className="flex-1 container mx-auto p-4">
                        {activeTab === 'buku' && (
                            <PDFViewer 
                                pdfDoc={pdfDoc}
                                currentPage={currentPage}
                                setCurrentPage={setCurrentPage}
                                zoomLevel={zoomLevel}
                                setZoomLevel={setZoomLevel}
                                showSidebar={showSidebar}
                                setShowSidebar={setShowSidebar}
                                navigateToSection={navigateToSection}
                                highlightText={highlightText}
                                setHighlightText={setHighlightText}
                            />
                        )}
                        
                        {activeTab === 'guru' && (
                            <GuruDirectory 
                                selectedGuru={selectedGuru}
                                setSelectedGuru={setSelectedGuru}
                                taskFilter={taskFilter}
                                setTaskFilter={setTaskFilter}
                                onNavigateToPage={(page, guruName) => {
                                    setActiveTab('buku');
                                    setCurrentPage(page);
                                    setHighlightText(guruName);
                                }}
                            />
                        )}
                        
                        {activeTab === 'takwim' && (
                            <Calendar 
                                currentMonth={currentMonth}
                                setCurrentMonth={setCurrentMonth}
                                selectedDate={selectedDate}
                                setSelectedDate={setSelectedDate}
                            />
                        )}
                    </main>
                    
                    {/* Toast Notification */}
                    {toast && (
                        <div className={`fixed top-20 right-4 p-4 rounded-lg shadow-lg toast z-50 ${
                            toast.type === 'error' ? 'bg-red-500' : 'bg-green-500'
                        } text-white max-w-md`}>
                            {toast.message}
                        </div>
                    )}
                </div>
            );
        }
        
        // ========== PDF VIEWER COMPONENT ==========
        function PDFViewer({ 
            pdfDoc, 
            currentPage, 
            setCurrentPage, 
            zoomLevel, 
            setZoomLevel,
            showSidebar,
            setShowSidebar,
            navigateToSection,
            highlightText,
            setHighlightText
        }) {
            const canvasRef = useRef(null);
            const containerRef = useRef(null);
            const [isRendering, setIsRendering] = useState(false);
            
            // Get current section name
            const currentSection = useMemo(() => {
                const section = tableOfContents.find(
                    s => currentPage >= s.page_start && currentPage <= s.page_end
                );
                return section ? section.label : 'Buku Pengurusan';
            }, [currentPage]);
            
            // Render PDF page
            useEffect(() => {
                if (!pdfDoc || !canvasRef.current) return;
                
                const renderPage = async () => {
                    setIsRendering(true);
                    try {
                        const page = await pdfDoc.getPage(currentPage);
                        const canvas = canvasRef.current;
                        const context = canvas.getContext('2d');
                        
                        const viewport = page.getViewport({ 
                            scale: (zoomLevel / 100) * (window.devicePixelRatio || 1)
                        });
                        
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        
                        const renderContext = {
                            canvasContext: context,
                            viewport: viewport
                        };
                        
                        await page.render(renderContext).promise;
                    } catch (error) {
                        console.error('Error rendering page:', error);
                    } finally {
                        setIsRendering(false);
                    }
                };
                
                renderPage();
            }, [pdfDoc, currentPage, zoomLevel]);
            
            const handleZoomChange = (newZoom) => {
                setZoomLevel(Math.max(50, Math.min(200, newZoom)));
            };
            
            return (
                <div className="relative">
                    {/* Sidebar */}
                    <div className={`fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-40 sidebar ${showSidebar ? 'open' : ''}`}>
                        <div className="p-4">
                            <div className="flex justify-between items-center mb-4">
                                <h3 className="font-bold text-lg">Kandungan</h3>
                                <button
                                    onClick={() => setShowSidebar(false)}
                                    className="text-gray-500 hover:text-gray-700"
                                >
                                    ‚úï
                                </button>
                            </div>
                            <div className="space-y-2 overflow-y-auto" style={{ maxHeight: 'calc(100vh - 100px)' }}>
                                {tableOfContents.map((section, idx) => (
                                    <button
                                        key={idx}
                                        onClick={() => navigateToSection(section)}
                                        className="w-full text-left p-3 rounded-lg hover:bg-indigo-50 transition-colors"
                                    >
                                        <div className="flex items-center gap-2">
                                            <span className="text-2xl">{section.icon}</span>
                                            <div className="flex-1">
                                                <div className="font-semibold text-sm">{section.label}</div>
                                                <div className="text-xs text-gray-500">
                                                    m/s {section.page_start}
                                                    {section.page_end !== section.page_start && `-${section.page_end}`}
                                                </div>
                                            </div>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                    
                    {/* Overlay */}
                    {showSidebar && (
                        <div 
                            className="fixed inset-0 bg-black bg-opacity-50 z-30"
                            onClick={() => setShowSidebar(false)}
                        />
                    )}
                    
                    {/* Controls */}
                    <div className="bg-white rounded-lg shadow-md p-4 mb-4">
                        <div className="flex flex-wrap items-center gap-4">
                            {/* Sidebar Toggle */}
                            <button
                                onClick={() => setShowSidebar(true)}
                                className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
                            >
                                üìö Kandungan
                            </button>
                            
                            {/* Page Navigation */}
                            <div className="flex items-center gap-2">
                                <button
                                    onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}
                                    disabled={currentPage === 1}
                                    className="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"
                                >
                                    ‚Üê
                                </button>
                                <span className="text-sm font-semibold px-3">
                                    {currentPage} / {CONFIG.jumlahMukaSurat}
                                </span>
                                <button
                                    onClick={() => setCurrentPage(Math.min(CONFIG.jumlahMukaSurat, currentPage + 1))}
                                    disabled={currentPage === CONFIG.jumlahMukaSurat}
                                    className="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"
                                >
                                    ‚Üí
                                </button>
                            </div>
                            
                            {/* Zoom Controls */}
                            <div className="flex items-center gap-2">
                                <button
                                    onClick={() => handleZoomChange(zoomLevel - 25)}
                                    className="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300"
                                >
                                    ‚àí
                                </button>
                                <select
                                    value={zoomLevel}
                                    onChange={(e) => handleZoomChange(parseInt(e.target.value))}
                                    className="px-2 py-2 border rounded"
                                >
                                    <option value="50">50%</option>
                                    <option value="75">75%</option>
                                    <option value="100">100%</option>
                                    <option value="125">125%</option>
                                    <option value="150">150%</option>
                                    <option value="200">200%</option>
                                </select>
                                <button
                                    onClick={() => handleZoomChange(zoomLevel + 25)}
                                    className="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300"
                                >
                                    +
                                </button>
                            </div>
                            
                            {/* Clear Highlight */}
                            {highlightText && (
                                <button
                                    onClick={() => setHighlightText(null)}
                                    className="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600"
                                >
                                    ‚úï Kosongkan Highlight
                                </button>
                            )}
                        </div>
                        
                        {/* Current Section */}
                        <div className="mt-3 text-sm text-gray-600">
                            <strong>Bahagian:</strong> {currentSection}
                        </div>
                    </div>
                    
                    {/* PDF Canvas */}
                    <div ref={containerRef} className="pdf-container rounded-lg shadow-lg p-4">
                        {isRendering && (
                            <div className="skeleton h-96 rounded-lg mb-4"></div>
                        )}
                        <canvas 
                            ref={canvasRef}
                            className={`${isRendering ? 'hidden' : ''}`}
                            style={{ width: `${zoomLevel}%` }}
                        />
                    </div>
                </div>
            );
        }
        
        // ========== GURU DIRECTORY COMPONENT ==========
        function GuruDirectory({ selectedGuru, setSelectedGuru, taskFilter, setTaskFilter, onNavigateToPage }) {
            const filteredGuruList = useMemo(() => {
                if (taskFilter === 'semua') return guruDatabase;
                return guruDatabase.filter(guru => 
                    guru.tugas.some(tugas => tugas.category === taskFilter)
                );
            }, [taskFilter]);
            
            if (selectedGuru) {
                return (
                    <div>
                        {/* Back Button */}
                        <button
                            onClick={() => setSelectedGuru(null)}
                            className="mb-4 px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300"
                        >
                            ‚Üê Kembali ke Senarai
                        </button>
                        
                        {/* Guru Detail Card */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-4">
                            <div className="flex items-center gap-4 mb-4">
                                <div className="text-6xl">{selectedGuru.avatar}</div>
                                <div>
                                    <h2 className="text-2xl font-bold text-gray-800">{selectedGuru.nama}</h2>
                                    <p className="text-gray-600">{selectedGuru.jawatan}</p>
                                </div>
                            </div>
                            
                            {/* Tasks List */}
                            <div className="mt-6">
                                <h3 className="font-bold text-lg mb-3">Tugas & Tanggungjawab</h3>
                                <div className="space-y-2">
                                    {selectedGuru.tugas.map((tugas, idx) => (
                                        <div
                                            key={idx}
                                            onClick={() => onNavigateToPage(tugas.page_number, selectedGuru.nama)}
                                            className="p-4 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors"
                                        >
                                            <div className="flex items-center gap-3">
                                                <span 
                                                    className="text-2xl"
                                                    style={{ color: taskCategories[tugas.category].color }}
                                                >
                                                    {taskCategories[tugas.category].icon}
                                                </span>
                                                <div className="flex-1">
                                                    <div className="font-semibold">{tugas.label}</div>
                                                    <div className="text-sm text-gray-500">
                                                        {taskCategories[tugas.category].label}
                                                    </div>
                                                </div>
                                                <div className="text-sm text-gray-500">
                                                    m/s {tugas.page_number}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            return (
                <div>
                    {/* Filter Buttons */}
                    <div className="mb-4 overflow-x-auto">
                        <div className="flex gap-2 pb-2">
                            <button
                                onClick={() => setTaskFilter('semua')}
                                className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap ${
                                    taskFilter === 'semua'
                                        ? 'bg-indigo-600 text-white'
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`}
                            >
                                Semua
                            </button>
                            {Object.entries(taskCategories).map(([key, cat]) => (
                                <button
                                    key={key}
                                    onClick={() => setTaskFilter(key)}
                                    className={`px-4 py-2 rounded-lg font-semibold whitespace-nowrap ${
                                        taskFilter === key
                                            ? 'text-white'
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                    style={taskFilter === key ? { backgroundColor: cat.color } : {}}
                                >
                                    {cat.icon} {cat.label}
                                </button>
                            ))}
                        </div>
                    </div>
                    
                    {/* Guru Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {filteredGuruList.map((guru, idx) => (
                            <div
                                key={idx}
                                onClick={() => setSelectedGuru(guru)}
                                className="bg-white rounded-lg shadow-md p-4 hover:shadow-lg cursor-pointer transition-shadow"
                            >
                                <div className="flex items-center gap-3">
                                    <div className="text-4xl">{guru.avatar}</div>
                                    <div className="flex-1">
                                        <h3 className="font-bold text-gray-800">{guru.nama}</h3>
                                        <p className="text-sm text-gray-600">{guru.jawatan}</p>
                                        <p className="text-xs text-gray-500 mt-1">
                                            {guru.tugas.length} tugas
                                        </p>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }
        
        // ========== CALENDAR COMPONENT ==========
        function Calendar({ currentMonth, setCurrentMonth, selectedDate, setSelectedDate }) {
            const monthNames = [
                'Januari', 'Februari', 'Mac', 'April', 'Mei', 'Jun',
                'Julai', 'Ogos', 'September', 'Oktober', 'November', 'Disember'
            ];
            
            const dayNames = ['Ahd', 'Isn', 'Sel', 'Rab', 'Kha', 'Jum', 'Sab'];
            
            const getDaysInMonth = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDayOfWeek = firstDay.getDay();
                
                const days = [];
                
                // Previous month days
                const prevMonthLastDay = new Date(year, month, 0).getDate();
                for (let i = startDayOfWeek - 1; i >= 0; i--) {
                    days.push({
                        date: prevMonthLastDay - i,
                        month: 'prev',
                        fullDate: new Date(year, month - 1, prevMonthLastDay - i)
                    });
                }
                
                // Current month days
                for (let i = 1; i <= daysInMonth; i++) {
                    days.push({
                        date: i,
                        month: 'current',
                        fullDate: new Date(year, month, i)
                    });
                }
                
                // Next month days
                const remainingDays = 42 - days.length; // 6 weeks * 7 days
                for (let i = 1; i <= remainingDays; i++) {
                    days.push({
                        date: i,
                        month: 'next',
                        fullDate: new Date(year, month + 1, i)
                    });
                }
                
                return days;
            };
            
            const getEventsForDate = (date) => {
                const dateString = date.toISOString().split('T')[0];
                return takwimData[dateString] || [];
            };
            
            const days = getDaysInMonth(currentMonth);
            const selectedEvents = selectedDate ? getEventsForDate(new Date(selectedDate)) : [];
            
            const navigateMonth = (direction) => {
                const newMonth = new Date(currentMonth);
                newMonth.setMonth(newMonth.getMonth() + direction);
                setCurrentMonth(newMonth);
            };
            
            return (
                <div>
                    {/* Month Navigation */}
                    <div className="bg-white rounded-lg shadow-md p-4 mb-4">
                        <div className="flex items-center justify-between">
                            <button
                                onClick={() => navigateMonth(-1)}
                                className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
                            >
                                ‚Üê
                            </button>
                            <h2 className="text-xl font-bold">
                                {monthNames[currentMonth.getMonth()]} {currentMonth.getFullYear()}
                            </h2>
                            <button
                                onClick={() => navigateMonth(1)}
                                className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
                            >
                                ‚Üí
                            </button>
                        </div>
                    </div>
                    
                    {/* Calendar Grid */}
                    <div className="bg-white rounded-lg shadow-lg p-4 mb-4">
                        {/* Day Headers */}
                        <div className="grid grid-cols-7 gap-2 mb-2">
                            {dayNames.map((day, idx) => (
                                <div key={idx} className="text-center font-bold text-gray-700 text-sm">
                                    {day}
                                </div>
                            ))}
                        </div>
                        
                        {/* Calendar Days */}
                        <div className="grid grid-cols-7 gap-2">
                            {days.map((day, idx) => {
                                const events = getEventsForDate(day.fullDate);
                                const dateString = day.fullDate.toISOString().split('T')[0];
                                const isSelected = dateString === selectedDate;
                                const isToday = day.fullDate.toDateString() === new Date().toDateString();
                                
                                return (
                                    <div
                                        key={idx}
                                        onClick={() => events.length > 0 && setSelectedDate(dateString)}
                                        className={`calendar-day p-2 border rounded-lg ${
                                            day.month !== 'current' ? 'bg-gray-100 text-gray-400' : 'bg-white'
                                        } ${events.length > 0 ? 'cursor-pointer hover:bg-indigo-50' : ''} ${
                                            isSelected ? 'ring-2 ring-indigo-600' : ''
                                        } ${isToday ? 'border-indigo-600 border-2' : ''}`}
                                    >
                                        <div className="text-center font-semibold">{day.date}</div>
                                        {events.length > 0 && (
                                            <div className="flex justify-center gap-1 mt-1">
                                                {events.map((event, eventIdx) => (
                                                    <div
                                                        key={eventIdx}
                                                        className="event-dot"
                                                        style={{ backgroundColor: event.color }}
                                                        title={event.event}
                                                    />
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                    
                    {/* Event Detail Panel */}
                    {selectedDate && selectedEvents.length > 0 && (
                        <div className="bg-white rounded-lg shadow-lg p-4 mb-4">
                            <div className="flex justify-between items-center mb-3">
                                <h3 className="font-bold text-lg">
                                    {new Date(selectedDate).toLocaleDateString('ms-MY', { 
                                        weekday: 'long',
                                        day: 'numeric', 
                                        month: 'long', 
                                        year: 'numeric' 
                                    })}
                                </h3>
                                <button
                                    onClick={() => setSelectedDate(null)}
                                    className="text-gray-500 hover:text-gray-700"
                                >
                                    ‚úï
                                </button>
                            </div>
                            <div className="space-y-2">
                                {selectedEvents.map((event, idx) => (
                                    <div key={idx} className="flex items-center gap-3 p-3 border rounded-lg">
                                        <div
                                            className="event-dot"
                                            style={{ 
                                                backgroundColor: event.color,
                                                width: '12px',
                                                height: '12px'
                                            }}
                                        />
                                        <div>
                                            <div className="font-semibold">{event.event}</div>
                                            <div className="text-sm text-gray-600">
                                                {eventTypes[event.type].label}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    {/* Legend */}
                    <div className="bg-white rounded-lg shadow-md p-4">
                        <h3 className="font-bold mb-3">Legenda</h3>
                        <div className="grid grid-cols-2 gap-3">
                            {Object.entries(eventTypes).map(([key, type]) => (
                                <div key={key} className="flex items-center gap-2">
                                    <div
                                        className="event-dot"
                                        style={{ 
                                            backgroundColor: type.color,
                                            width: '12px',
                                            height: '12px'
                                        }}
                                    />
                                    <span className="text-sm">{type.label}</span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }
        
        // ========== RENDER APP ==========
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered:', registration))
                    .catch(error => console.log('SW registration failed:', error));
            });
        }
    </script>
</body>
</html>
